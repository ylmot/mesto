(()=>{"use strict";var e,t,n,o,r={26:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var o=n(172),r=n(484),c=await o.R.getProfileId().then((function(e){return e})),a=document.querySelector(".places__list"),i=document.querySelector(".popup_type_edit"),u=document.querySelector(".popup_type_new-card"),l=document.querySelector(".popup_type_avatar"),s=document.querySelector(".popup_type_image"),d=s.querySelector(".popup__image"),p=s.querySelector(".popup__caption"),_=s.querySelector(".popup__close");i.classList.add("popup_is-animated"),u.classList.add("popup_is-animated"),s.classList.add("popup_is-animated");var f=function(e){var t=document.querySelector("#card-template").content.querySelector(".card").cloneNode(!0),n=t.querySelector(".card__image"),a=t.querySelector(".card__title"),i=t.querySelector(".card__like-button"),u=t.querySelector(".card__like-counter"),l=t.querySelector(".card__delete-button");return l.style.display="none",n.setAttribute("src",e.link),n.addEventListener("click",(function(){d.setAttribute("src",e.link),p.textContent=e.name,_.addEventListener("click",(function(){return r.l.closeModal(s)})),r.l.openModal(s)})),e.likes.some((function(e){return e._id===c}))&&i.classList.add("card__like-button_is-active"),e.owner._id==c&&(l.style.display="inline-block",l.addEventListener("click",(function(t){t.target.closest(".card").remove(),o.R.deleteCard(e._id)}))),a.textContent=e.name,i.addEventListener("click",(function(t){t.target.classList.contains("card__like-button_is-active")?(u.textContent=Number(u.textContent)-1,o.R.delLike(e._id).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(t.target.closest(".card")),t.target.closest(".card").parentNode.insertBefore(f(e),t.target.closest(".card"))})).then((function(e){return t.target.closest(".card").remove()}))):(u.textContent=Number(u.textContent)+1,o.R.putLike(e._id).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(t.target.closest(".card")),t.target.closest(".card").parentNode.insertBefore(f(e),t.target.closest(".card"))})).then((function(e){return t.target.closest(".card").remove()}))),t.target.classList.toggle("card__like-button_is-active")})),u.textContent=e.likes.length,t};o.R.getInitialCards().then((function(e){for(var t=1;t<e.length;t++)a.append(f(e[t]))}));var h=i.querySelector(".popup__input_type_name"),v=i.querySelector(".popup__input_type_description"),y=[h,v],m=i.querySelector(".popup__button"),g=document.querySelector(".profile__title"),S=document.querySelector(".profile__description"),k=document.querySelector(".profile__image");o.R.getProfileData().then((function(e){g.textContent=e.name,S.textContent=e.about,k.style.backgroundImage="url(".concat(e.avatar,")")})),document.querySelector(".profile__edit-button").addEventListener("click",(function(e){h.value=g.textContent,v.value=S.textContent,r.l.openModal(i)})),h.addEventListener("input",(function(e){return r.l.checkValidity(h,m,y)})),v.addEventListener("input",(function(e){return r.l.checkValidity(v,m,y)})),i.querySelector(".popup__close").addEventListener("click",(function(){return r.l.closeModal(i)})),i.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),o.R.editProfile(h.value,v.value).then((function(e){return e.json()})).then((function(e){g.textContent=e.name,S.textContent=e.about,k.style.backgroundImage="url(".concat(e.avatar,")")})),r.l.closeModal(i)}));var b=l.querySelector(".popup__input_type_avatar"),E=l.querySelector(".popup__button");b.addEventListener("input",(function(e){return r.l.checkValidity(b,E,[b])})),l.querySelector(".popup__close").addEventListener("click",(function(){return r.l.closeModal(l)})),document.querySelector(".profile__edit-avatar-button").addEventListener("click",(function(e){b.value=null,r.l.openModal(l)})),l.querySelector(".popup__close").addEventListener("click",(function(){return r.l.closeModal(l)})),l.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),o.R.editAvatar(b.value).then((function(e){return e.json()})).then((function(e){k.style.backgroundImage="url(".concat(e.avatar,")"),r.l.closeModal(l)}))}));var L=u.querySelector(".popup__input_type_card-name"),q=u.querySelector(".popup__input_type_url"),C=[L,q],O=u.querySelector(".popup__button");L.addEventListener("input",(function(e){return r.l.checkValidity(L,O,C)})),q.addEventListener("input",(function(e){return r.l.checkValidity(q,O,C)})),i.querySelector(".popup__close").addEventListener("click",(function(){return r.l.closeModal(i)})),document.querySelector(".profile__add-button").addEventListener("click",(function(e){L.value=null,q.value=null,r.l.openModal(u)})),u.querySelector(".popup__close").addEventListener("click",(function(){return r.l.closeModal(u)})),u.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),o.R.addCard(L.value,q.value).then((function(e){return e.json()})).then((function(e){console.log(e),a.append(f(e))})),r.l.closeModal(u)})),t()}catch(e){t(e)}}),1)},172:(e,t,n)=>{n.d(t,{R:()=>o});var o={TOKEN:"8687969c-73de-47ec-906f-d4fff1a6504f",GROUPID:"apf-cohort-202",getProfileData:function(){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me"),{headers:{authorization:this.TOKEN}}).then((function(e){return e.json()}))},getProfileId:function(){return this.getProfileData().then((function(e){return e._id}))},getInitialCards:function(){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards"),{headers:{authorization:this.TOKEN}}).then((function(e){return e.json()}))},editProfile:function(e,t){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me"),{method:"PATCH",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).catch((function(e){return console.log(e)}))},editAvatar:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/users/me/avatar "),{method:"PATCH",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).catch((function(e){return console.log(e)}))},addCard:function(e,t){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards"),{method:"POST",headers:{authorization:this.TOKEN,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).catch((function(e){return console.log(e)}))},deleteCard:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))},putLike:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))},delLike:function(e){return fetch("https://nomoreparties.co/v1/".concat(this.GROUPID,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this.TOKEN}}).catch((function(e){return console.log(e)}))}}},484:(e,t,n)=>{n.d(t,{l:()=>o});var o={openModal:function(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",(function(t){"Escape"==t.key&&closeModal(e)})),e.addEventListener("click",(function(t){t.target===t.currentTarget&&closeModal(e)}))},closeModal:function(e){e.classList.remove("popup_is-opened")},showInputError:function(e,t){var n=document.querySelector(".popup__error_type_".concat(e.id));n.textContent=t,n.classList.add("popup__error_active"),e.classList.add("popup__input_error")},hideInputError:function(e,t){var n=document.querySelector(".popup__error_type_".concat(e.id));n.textContent="",n.classList.remove("popup__error_active"),e.classList.remove("popup__input_error")},toggleButton:function(e,t){t.some((function(e){return!e.validity.valid}))?(e.classList.add("inactive"),e.disabled=!0):(e.classList.remove("inactive"),e.disabled=!1)},checkValidity:function(e,t,n){toggleButton(t,n),e.validity.valid?hideInputError(e,e.validationMessage):showInputError(e,e.validationMessage)}}}},c={};function a(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return r[e](n,n.exports,a),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},a.a=(r,c,a)=>{var i;a&&((i=[]).d=-1);var u,l,s,d=new Set,p=r.exports,_=new Promise(((e,t)=>{s=t,l=e}));_[t]=p,_[e]=e=>(i&&e(i),d.forEach(e),_.catch((e=>{}))),r.exports=_,c((r=>{var c;u=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var c=[];c.d=0,r.then((e=>{a[t]=e,o(c)}),(e=>{a[n]=e,o(c)}));var a={};return a[e]=e=>e(c),a}}var i={};return i[e]=e=>{},i[t]=r,i})))(r);var a=()=>u.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(c=()=>t(a)).r=0;var n=e=>e!==i&&!d.has(e)&&(d.add(e),e&&!e.d&&(c.r++,e.push(c)));u.map((t=>t[e](n)))}));return c.r?l:a()}),(e=>(e?s(_[n]=e):l(p),o(i)))),i&&i.d<0&&(i.d=0)},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(26)})();